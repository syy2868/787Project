// This file is generated by FBC.

#include "TwoCars.h"
#include <string.h>
#include <stdio.h>

/* Function block initialization function */
void TwoCarsinit(TwoCars* me)
{
    LeadingCarinit(&me->LeadingCar);
    FollowingCarinit(&me->FollowingCar);
    LaserSensorinit(&me->LaserSensor);
    Controllerinit(&me->Controller);
}

/* Function block execution function */
void TwoCarsrun(TwoCars* me)
{
    me->FollowingCar._input.event.FrontLaserSensor = me->LaserSensor._output.event.Output;
    me->FollowingCar._input.event.ACC = me->Controller._output.event.ACC;
    me->FollowingCar._input.event.DEC = me->Controller._output.event.DEC;
    me->FollowingCar._distance = me->LaserSensor._distance;
    me->LaserSensor._pos2 = me->FollowingCar._pos2;
    me->LaserSensor._pos1 = me->LeadingCar._pos1;
    me->LaserSensor._input.event.SensorReading = me->FollowingCar._output.event.Update || me->LeadingCar._output.event.Update;
    me->Controller._input.event.Update = me->LaserSensor._output.event.Output || me->FollowingCar._output.event.Update;
    me->Controller._distance = me->LaserSensor._distance;
    me->Controller._speed2 = me->FollowingCar._speed2;
    me->Controller._speed1 = me->LeadingCar._speed1;
    
    LeadingCarrun(&me->LeadingCar);
    FollowingCarrun(&me->FollowingCar);
    LaserSensorrun(&me->LaserSensor);
    Controllerrun(&me->Controller);
    
    me->_Car2Pos = me->FollowingCar._pos2;
    me->_Car1Pos = me->LeadingCar._pos1;
    me->_Car2Speed = me->FollowingCar._speed2;
    me->_Car1Speed = me->LeadingCar._speed1;
}
